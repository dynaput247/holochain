language: rust
sudo: required
dist: trusty
addons:
  apt:
    packages:
      - libssl-dev
cache: cargo
rust:
  - nightly

install:
  - rustup component add rustfmt-preview
  - rustup update nightly
  - cargo +nightly install clippy --force
  - RUSTFLAGS="--cfg procmacro2_semver_exempt" cargo +nightly install cargo-tarpaulin --force

script:
  - make test
